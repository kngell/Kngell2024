@use "css/backend/admin/abstracts" as *;

/*--------------- PRODUCT LIST -------------*/
.product-list {
  grid-template-rows: min-content min-content auto;
  gap: 2.4rem;

  &__title {
    display: flex;
    align-items: flex-end;
    gap: 2.4rem;

    .title {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      flex: 1;

      &__text {
        color: map-deep-get($color-neutral, black, black-700);
        font: {
          size: map-deep-get($display-m, medium, font-size);
          weight: map-deep-get($display-m, medium, font-weight);
        }
        line-height: map-deep-get($display-m, medium, line-height);
        letter-spacing: map-deep-get($display-m, medium, letter-spacing);
      }

      &__breadcrumbs {
        @include breadcrumbs(
          $padding-y: 0,
          $color: map-deep-get($color-primary, primary-500),
          $font-size: map-deep-get($text-m, medium, font-size),
          $line-height: map-deep-get($text-m, medium, line-height),
          $active-color: map-deep-get($color-neutral, black, black-500),
          $gap: 0.8rem,
          $separator-size: 1.8rem
        );
      }
    }

    .user-action {
      display: flex;
      gap: 1.6rem;

      .btn {
        gap: 0.4rem;
      }
    }

    @include respond-above(md) {
      grid-column: span 4;
    }
  }

  &__search-and-filter {
    grid-column: span 4;
    display: flex;
    justify-content: space-between;

    .search-form {
      @include search-component(
        $search-width: 32rem,
        $padding: 0.8rem 1.2rem,
        $gap: 0.4rem,
        $border: 1px solid map-deep-get($color-neutral, gray, gray-100),
        $background: map-deep-get($color-neutral, white),
        $icon-color: map-deep-get($color-neutral, black, black-500),
        $color: map-deep-get($color-neutral, gray, gray-400),
        $input-height: 2.4rem,
        $font-size: map-deep-get($text-m, regular, font-size),
        $font-weight: map-deep-get($text-m, regular, font-weight),
        $line-height: map-deep-get($text-m, regular, line-height),
        $letter-spacing: map-deep-get($text-m, regular, letter-spacing)
      );
    }

    .right {
      display: flex;
      gap: 1.6rem;

      &__date-picker,
      &__filter {
        display: flex;
        padding: 1rem 1.4rem;
        align-items: center;
        gap: 0.8rem;
        border-radius: 8px;
        border: 1px solid map-deep-get($color-neutral, gray, gray-100);
        background: map-deep-get($color-neutral, white);

        .icon-container {
          @include icon-with-badge($with-badge: false, $icon-size: 2rem, $padding: 0);
        }

        .icon-text {
          font-size: map-deep-get($text-m, medium, font-size);
          font-weight: map-deep-get($text-m, medium, font-weight);
          line-height: map-deep-get($text-m, medium, line-height);
          letter-spacing: map-deep-get($text-m, medium, letter-spacing);
        }
      }
    }
  }

  &__table-wrapper {
    grid-column: 1 / -1;
    border-radius: map-deep-get($radius, s);
    border: 1px solid map-deep-get($color-neutral, gray, gray-100);
    box-shadow: $hard-shadow;

    display: block; // ensures it sizes to children (default, but explicit is good)
    height: auto; // let it follow table height
    align-self: start; // important when wrapper is inside a grid, prevents stretching

    .table {
      width: 100%;
      border-collapse: collapse;

      // generic cell base
      &__head--row-cell,
      &__body--row-cell {
        padding: 1.8rem 2.2rem;
        border-bottom: 1px solid map-deep-get($color-neutral, gray, gray-50);
        background: map-deep-get($color-neutral, white);
        text-align: left;
      }

      /* HEADERS */
      &__head--row-cell {
        background-color: map-deep-get($color-neutral, gray, gray-25);
        color: map-deep-get($color-neutral, black, black-700);
        font-size: map-deep-get($text-m, medium, font-size);
        font-weight: map-deep-get($text-m, medium, font-weight);
        line-height: map-deep-get($text-m, medium, line-height);
        letter-spacing: map-deep-get($text-m, medium, letter-spacing);
        .header-cell-product,
        .header-cell {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 0.8rem;

          @include custom-checkbox(
            header-cell-product,
            $box-size: 2rem,
            $border-width: 2px,
            $border-color: map-deep-get($color-neutral, gray, gray-400),
            $background: map-deep-get($color-neutral, white),
            $border-radius: 6px,
            $gap: 0.8rem
          );
          .icon-container {
            @include icon-with-badge($with-badge: false, $icon-size: 2rem, $padding: 0);
            cursor: pointer;
            &:hover {
              color: map-deep-get($color-primary, primary-500);
              background-color: map-deep-get($color-primary, primary-50);
            }
          }
        }
      }

      /* BODY */
      &__body--row {
        @include transition;
        cursor: pointer;
        &-cell {
          .body-cell-product,
          .body-cell,
          .body-cell-action {
            display: flex;
            align-items: center;
            gap: 0.8rem;
          }
          .body-cell-product {
            @include custom-checkbox(
              body-cell-product,
              $box-size: 2rem,
              $border-width: 2px,
              $border-color: map-deep-get($color-neutral, gray, gray-400),
              $background: map-deep-get($color-neutral, white),
              $border-radius: 6px,
              $gap: 0.8rem,
              $flex: 1 0 0
            );

            &__label {
              // display: flex;
              // align-items: center;
              // gap: 0.8rem;

              .img-container {
                width: 4.4rem;
                height: 4.4rem;
                border-radius: 0.4rem;
                background: map-deep-get($color-neutral, gray, gray-100);

                .image {
                  width: 100%;
                  height: 100%;
                  object-fit: contain;
                }
              }

              .text-container {
                display: flex;
                flex-direction: column;
                gap: 0.4rem;
                color: map-deep-get($color-neutral, black, black-700);

                &__name {
                  font-size: map-deep-get($text-m, medium, font-size);
                  font-weight: map-deep-get($text-m, medium, font-weight);
                }

                &__variant {
                  font-size: map-deep-get($text-s, regular, font-size);
                }
              }
            }
          }

          .body-cell {
            & > span {
              height: 4.4rem;
              display: flex;
              align-items: center;
              font-size: map-deep-get($text-m, medium, font-size);
              font-weight: map-deep-get($text-m, medium, font-weight);
              line-height: map-deep-get($text-m, medium, line-height);
              letter-spacing: map-deep-get($text-m, medium, letter-spacing);
            }

            &.sku {
              color: map-deep-get($color-primary, primary-500);
            }
          }
          .body-cell-action {
            .icon-container {
              @include icon-with-badge($with-badge: false, $icon-size: 2rem, $padding: 0);
              cursor: pointer;
            }
          }
        }
        &.row--selected {
          background-color: map-deep-get($color-primary, primary-50);

          .table__body--row-cell {
            background-color: map-deep-get($color-primary, primary-50);
          }
        }
        &:hover {
          .table__body--row-cell {
            background-color: map-deep-get($color-neutral, gray, gray-25);
          }

          &.row--selected {
            .table__body--row-cell {
              background-color: map-deep-get($color-primary, primary-100) !important;
            }
          }
        }
      }
    }
    .pagination {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 2rem;
      border-top: 1px solid map-deep-get($color-neutral, gray, gray-100);
      background: map-deep-get($color-neutral, white);

      &__info {
        font-size: map-deep-get($text-m, regular, font-size);
        color: map-deep-get($color-neutral, black, black-600);
      }

      &__nav {
        display: flex;
        align-items: center;
        gap: 0.8rem;
      }

      &__btn {
        width: 3.2rem;
        height: 3.2rem;
        border-radius: map-deep-get($radius, s);
        border: 1px solid map-deep-get($color-neutral, gray, gray-200);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;

        &:hover:not(:disabled) {
          border-color: map-deep-get($color-primary, primary-500);
          background: map-deep-get($color-primary, primary-50);
        }

        &:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .icon {
          width: 1.6rem;
          height: 1.6rem;
        }
      }

      &__pages {
        display: flex;
        gap: 0.4rem;
      }

      &__page {
        min-width: 3.2rem;
        height: 3.2rem;
        padding: 0 0.8rem;
        border-radius: map-deep-get($radius, s);
        border: 1px solid map-deep-get($color-neutral, gray, gray-200);
        font-size: map-deep-get($text-m, regular, font-size);
        transition: all 0.2s ease;

        &:hover {
          border-color: map-deep-get($color-primary, primary-500);
          background: map-deep-get($color-primary, primary-50);
        }

        &--active {
          border-color: map-deep-get($color-primary, primary-500);
          background: map-deep-get($color-primary, primary-500);
          color: map-deep-get($color-neutral, white);
        }
      }

      &__ellipsis {
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 3.2rem;
        height: 3.2rem;
        color: map-deep-get($color-neutral, black, black-400);
      }

      &__per-page {
        display: flex;
        align-items: center;
        gap: 0.8rem;

        &-label {
          font-size: map-deep-get($text-m, regular, font-size);
          color: map-deep-get($color-neutral, black, black-600);
        }
      }

      &__select {
        padding: 0.8rem 1.2rem;
        border: 1px solid map-deep-get($color-neutral, gray, gray-300);
        border-radius: map-deep-get($radius, s);
        font-size: map-deep-get($text-m, regular, font-size);

        &:focus {
          outline: 2px solid map-deep-get($color-primary, primary-300);
          outline-offset: 2px;
        }
      }
    }

    // Responsive design
    @media (max-width: 768px) {
      .pagination {
        flex-direction: column;
        gap: 1.6rem;
        align-items: stretch;

        &__nav {
          justify-content: center;
        }

        &__per-page {
          justify-content: center;
        }
      }
    }
  }

  /* Accessibility */
  .visually-hidden {
    position: absolute !important;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
  }
}
