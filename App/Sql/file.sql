SELECT COUNT(c.cart_id) AS number_of_items, SUM(c.item_quantity) AS total_quantity, c.item_id, p.name AS item_name, p.price AS item_price, p.media, _.*, g.category_name, b.brand_name FROM cart AS c INNER JOIN product AS p INNER JOIN product_category AS _ INNER JOIN categories AS g INNER JOIN brand AS b ON (p.id = c.item_id) ON(_.product_id = p.id) ON(g.cat_id = _.category_id) ON(b.br_id = g.br_id) WHERE (c.user_id = :af_user_id)